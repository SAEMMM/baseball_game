<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport">

    <title>Goal | ìˆ«ìì•¼êµ¬ í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸°</title>
    <style>
        body {
            text-align: center;
        }
    </style>
</head>
<body>

<h1>ì»´í“¨í„°ê°€ ìˆ«ìë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤
    <br>3ìë¦¬ì˜ ëœë¤í•œ ìˆ«ìë¥¼ ë§ì¶°ë³´ì„¸ìš”ğŸ€</h1>


    <form id="form">
        <p id="check"><span>0</span>ë²ˆì§¸ ì‹œë„ì…ë‹ˆë‹¤!</p>
        <input type="text" id="input">
        <button onclick="button_onclick()">í™•ì¸í•˜ê¸°</button>
    </form>
    <div id="logs"></div>

<script>
    let count = 0
    const span = document.querySelector('span')
    function button_onclick() {
        count++
        span.innerText = `${count}`
    }

    const $input = document.querySelector('#input')
    const $form = document.querySelector('#form')
    const $logs = document.querySelector('#logs')

    // ë¹ˆ ë°°ì—´ numbersì— 1~9ì˜ ìˆ«ì ë„£ê¸°
    const numbers = []
    for(n = 1; n <= 9; n++) {
        numbers.push(n)
    }

    // ëœë¤ìˆ«ì ë§Œë“¤ê¸°
    const answer = []
    for(n = 0; n < 3; n++) { // 0~2ê¹Œì§€ 3ë²ˆ ë°˜ë³µ
        const index = Math.floor(Math.random() * numbers.length)
        answer.push(numbers[index])
        numbers.splice(index, 1)
    }
    console.log(answer)

    const tries = []
    function checkInput(input) {
        if(input.length !== 3) {
            return alert('3ìë¦¬ì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”!')
        }
        if(new Set(input).size !== 3) { //Set: ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” íŠ¹ìˆ˜í•œ ë°°ì—´(Setì„ êµ¬í•  ë• lengthê°€ ì•„ë‹Œ size)
            return alert('ì¤‘ë³µëœ ìˆ«ìëŠ” ì…ë ¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!')
        }
        if(tries.includes(input)) {
            return alert('ì´ë¯¸ í™•ì¸í–ˆë˜ ìˆ«ìì—ìš”!')
        }
        return true
    }

    $form.addEventListener('submit', (event) => {
            event.preventDefault() // í¼ íƒœê·¸ì˜ ê¸°ë³¸ ë™ì‘ì„ ì·¨ì†Œí•˜ëŠ” ì½”ë“œ(submit ë  ë•Œ, ìƒˆë¡œê³ ì¹¨ ë§‰ê¸°)
            const value = $input.value
            $input.value = ''
            const valid = checkInput(value)
            if (!valid) return
            if(answer.join('') === value) {
                $logs.textContent = `${count - 1}ë²ˆë§Œì— ë§íˆì…¨ìŠµë‹ˆë‹¤!
                ê²Œì„ì„ ì¢…ë£Œí•©ë‹ˆë‹¤ğŸ˜‰`
                return
            }
            // if(tries.length >= 9) {
            //     const message = document.createTextNode(`í‹€ë ¸ìŠµë‹ˆë‹¤ã… ã…  ì •ë‹µì€ ${answer.join('')}ì…ë‹ˆë‹¤`)
            //     $logs.appendChild(message)
            //     return
            // }
            let strike = 0
            let ball = 0
            for(i = 0; i < answer.length; i++) {
                const index = value.indexOf(answer[i])
                if(index > -1) {
                    if(index === i) {
                        strike += 1
                    } else {
                        ball += 1
                    }
                }
            }
            $logs.append(`${value}: ${strike}S ${ball}B`, document.createElement('br'))
            tries.push(value)
        })

</script>
    
</body>
</html>